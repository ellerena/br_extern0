# Used to prepare DTS and also to generate DTB
# usage:
#    - in Xilinx SDK create a devicetree project
#    - copy below lines into the projet Makefile
#    - build project
#    - Done, dts and dtb files will be placed in the
#      BR2DIR folder.

# Makefile generated by Xilinx.

GIT_FOLDER = "/home/eddie/git"
BR2_EXTERNAL_BREXT0_PATH = "$(GIT_FOLDER)/br_extern0"
BR2DIR = "$(BR2_EXTERNAL_BREXT0_PATH)/board/coraz7"
DTSPATH = "$(BR2DIR)/zynq-coraz7.dts"
DTBPATH = "$(BR2DIR)/devicetree.dtb"

all:
	cpp -nostdinc -I include -I arch  -undef -x assembler-with-cpp  system-top.dts $(DTSPATH)
	dtc -I dts -O dtb -i . -o $(DTBPATH) $(DTSPATH)

